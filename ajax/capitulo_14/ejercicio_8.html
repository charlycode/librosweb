<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>14.8. Ejercicio 8 (Introducción a AJAX)</title>
        <link href="../../css/main-fa23fb7.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-82842-2']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
        <link rel="apple-touch-icon" type="image/png" href="../../apple-touch-icon.png" />
        <link rel="apple-touch-icon-precomposed" type="image/png" href="../../apple-touch-icon.png" />
        <meta name="apple-mobile-web-app-title" content="LibrosWeb" />

        <link rel="shortcut icon" type="image/png" href="../../favicon.png" />
        <meta name="site:version" content="fa23fb7" />
        <link rel="author" href="https://plus.google.com/u/0/107307901774377088868" />
        <link rel="prev" href="ejercicio_7.html" />
        <link rel="next" href="ejercicio_9.html" />
        <link rel="start" href="../index.html" />
        <meta name="twitter:site" content="@librosweb" />
        <link rel="search" type="application/opensearchdescription+xml" href="http://librosweb.es/opensearch/documentation.xml" title="Libros y tutoriales de LibrosWeb.es" />
        <meta property="fb:page_id" content="437758756273955" />
        <meta property="fb:app_id" content="437758756273955" />
        <meta property="og:type" content="website" />
        <meta property="og:title" content="14.8. Ejercicio 8 (Introducción a AJAX)" />
        <meta property="og:image" content="http://www.gravatar.com/avatar/9f219b4dfaa677bfd0f47753c02d5126.png?s=200" />
        <meta name="msapplication-TileColor" content="#CC1414" />
        <meta name="application-name" content="LibrosWeb" />
        <meta name="msapplication-tooltip" content="Libros y tutoriales sobre HTML, CSS, JavaScript, PHP y otras tecnologías web." />
    </head>
    <body class="book_page ajax">
    <div id="container" class="container">
        <div id="header">
            <h1><a href="../../index.html" title="LibrosWeb.es">LibrosWeb</a></h1>
            <form action="/buscar"><input type="text" placeholder="buscar..." name="q"/></form>
        </div>
        <div id="content"><div class="row">
        <ul class="breadcrumbs span12">
  <li><a href="../../index.html">Inicio</a></li>
  <li><a href="../index.html">Introducción a AJAX</a></li>
  <li><a href="../capitulo_14.html">Capítulo 14. Ejercicios resueltos</a></li>
  <li class="current"><span>14.8. Ejercicio 8</span></li>
</ul>

<div class="span9">
    <h1 id="ejercicio_8"><span>14.8.</span> Ejercicio 8</h1>
    

<div class="code javascript">
<pre class="javascript">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot; /&gt;
&lt;title&gt;Ejercicio 8 - DOM&lt;/title&gt;
&nbsp;
<span class="sy0">&lt;</span>script type<span class="sy0">=</span><span class="st0">&quot;text/javascript&quot;</span><span class="sy0">&gt;</span>
window.<span class="me1">onload</span> <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="co1">// Todos los enlaces deben cambiarse por un protocolo más seguro: &quot;https://&quot;</span>
  <span class="kw1">var</span> enlaces <span class="sy0">=</span> document.<span class="me1">getElementsByTagName</span><span class="br0">&#40;</span><span class="st0">&quot;a&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="kw1">for</span><span class="br0">&#40;</span><span class="kw1">var</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>enlaces.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">var</span> href_anterior <span class="sy0">=</span> enlaces<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">getAttribute</span><span class="br0">&#40;</span><span class="st0">'href'</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">var</span> nuevo_href <span class="sy0">=</span> href_anterior.<span class="me1">replace</span><span class="br0">&#40;</span><span class="st0">'http://'</span><span class="sy0">,</span> <span class="st0">&quot;https://&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="co1">// También se puede utilizar la función split()</span>
    <span class="co1">// var trozos = href_anterior.split('://');</span>
    <span class="co1">// var nuevo_href = 'https://' + trozos[1];</span>
    enlaces<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">setAttribute</span><span class="br0">&#40;</span><span class="st0">'href'</span><span class="sy0">,</span> nuevo_href<span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
&nbsp;
  <span class="co1">// Los parrafos cuyo class=&quot;importante&quot; se modifica por class=&quot;resaltado&quot;</span>
  <span class="co1">// y el resto de parrafos se les añade class=&quot;normal&quot;</span>
  <span class="co1">// Solución al problema de setAttribute() en Internet Explorer extraída de</span>
  <span class="co1">// http://www.digitalmediaminute.com/article/1394/the-browser-dom-and-the-class-attribute</span>
  <span class="kw1">var</span> nombreAtributoClass <span class="sy0">=</span> document.<span class="me1">all</span> <span class="sy0">?</span> <span class="st0">'className'</span> <span class="sy0">:</span> <span class="st0">'class'</span><span class="sy0">;</span>
&nbsp;
  <span class="kw1">var</span> parrafos <span class="sy0">=</span> document.<span class="me1">getElementsByTagName</span><span class="br0">&#40;</span><span class="st0">&quot;p&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="kw1">for</span><span class="br0">&#40;</span><span class="kw1">var</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>parrafos.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">if</span><span class="br0">&#40;</span>parrafos<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">getAttribute</span><span class="br0">&#40;</span>nombreAtributoClass<span class="br0">&#41;</span> <span class="sy0">==</span> <span class="st0">'importante'</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      parrafos<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">setAttribute</span><span class="br0">&#40;</span>nombreAtributoClass<span class="sy0">,</span> <span class="st0">&quot;resaltado&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    <span class="kw1">else</span> <span class="br0">&#123;</span>
      parrafos<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">setAttribute</span><span class="br0">&#40;</span>nombreAtributoClass<span class="sy0">,</span> <span class="st0">&quot;normal&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
&nbsp;
  <span class="co1">// Enlaces cuyo class=&quot;importante&quot;, se les añade el atributo &quot;name&quot; con un valor</span>
  <span class="co1">// autogenerado que sea igual a importante+i, donde i empieza en 0</span>
  <span class="kw1">var</span> enlaces <span class="sy0">=</span> document.<span class="me1">getElementsByTagName</span><span class="br0">&#40;</span><span class="st0">&quot;a&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="kw1">var</span> j<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span>
  <span class="kw1">for</span><span class="br0">&#40;</span><span class="kw1">var</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>enlaces.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">if</span><span class="br0">&#40;</span>enlaces<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">getAttribute</span><span class="br0">&#40;</span>nombreAtributoClass<span class="br0">&#41;</span> <span class="sy0">==</span> <span class="st0">'importante'</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      enlaces<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">setAttribute</span><span class="br0">&#40;</span><span class="st0">'name'</span><span class="sy0">,</span> <span class="st0">'importante'</span><span class="sy0">+</span>j<span class="br0">&#41;</span><span class="sy0">;</span>
      j<span class="sy0">++;</span>
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
<span class="sy0">&lt;/</span>script<span class="sy0">&gt;</span>
&lt;/head&gt;
&nbsp;
&lt;body&gt;
&lt;p&gt;Lorem ipsum dolor sit amet, &lt;a class=&quot;importante&quot; href=&quot;http://www.prueba.com&quot;&gt;consectetuer adipiscing elit&lt;/a&gt;. Sed mattis enim vitae orci. Phasellus libero. Maecenas nisl arcu, consequat congue, commodo nec, commodo ultricies, turpis. Quisque sapien nunc, posuere vitae, rutrum et, luctus at, pede. Pellentesque massa ante, ornare id, aliquam vitae, ultrices porttitor, pede. Nullam sit amet nisl elementum elit convallis malesuada. Phasellus magna sem, semper quis, faucibus ut, rhoncus non, mi. &lt;a class=&quot;importante&quot; href=&quot;http://prueba2&quot;&gt;Fusce porta&lt;/a&gt;. Duis pellentesque, felis eu adipiscing ullamcorper, odio urna consequat arcu, at posuere ante quam non dolor. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Duis scelerisque. Donec lacus neque, vehicula in, eleifend vitae, venenatis ac, felis. Donec arcu. Nam sed tortor nec ipsum aliquam ullamcorper. Duis accumsan metus eu urna. Aenean vitae enim. Integer lacus. Vestibulum venenatis erat eu odio. Praesent id metus.&lt;/p&gt;
&nbsp;
&lt;p class=&quot;importante&quot;&gt;Aenean at nisl. Maecenas egestas dapibus odio. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Proin consequat auctor diam. &lt;a href=&quot;http://prueba&quot;&gt;Ut bibendum blandit est&lt;/a&gt;. Curabitur vestibulum. Nunc malesuada porttitor sapien. Aenean a lacus et metus venenatis porta. Suspendisse cursus, sem non dapibus tincidunt, lorem magna porttitor felis, id sodales dolor dolor sed urna. Sed rutrum nulla vitae tellus. Sed quis eros nec lectus tempor lacinia. Aliquam nec lectus nec neque aliquet dictum. Etiam &lt;a href=&quot;http://prueba3&quot;&gt;consequat sem quis massa&lt;/a&gt;. Donec aliquam euismod diam. In magna massa, mattis id, pellentesque sit amet, porta sit amet, lectus. Curabitur posuere. Aliquam in elit. Fusce condimentum, arcu in scelerisque lobortis, ante arcu scelerisque mi, at cursus mi risus sed tellus.&lt;/p&gt;
&nbsp;
&lt;p&gt;Donec sagittis, nibh nec ullamcorper tristique, &lt;span class=&quot;importante&quot;&gt;pede velit feugiat massa&lt;/span&gt;, at sollicitudin justo tellus vitae justo. Vestibulum aliquet, nulla sit amet imperdiet suscipit, nunc erat laoreet est, a &lt;a href=&quot;http://prueba&quot;&gt;aliquam leo odio sed sem&lt;/a&gt;. Quisque eget eros vehicula diam euismod tristique. Ut dui. Donec in metus sed risus laoreet sollicitudin. Proin et nisi non arcu sodales hendrerit. In sem. Cras id augue eu lorem dictum interdum. Donec pretium. Proin &lt;a href=&quot;http://prueba4&quot;&gt;egestas&lt;/a&gt; adipiscing ligula. Duis iaculis laoreet turpis. Mauris mollis est sit amet diam. Curabitur hendrerit, eros quis malesuada tristique, ipsum odio euismod tortor, a vestibulum nisl mi at odio. &lt;a class=&quot;importante&quot; href=&quot;http://prueba5&quot;&gt;Sed non lectus non est pellentesque&lt;/a&gt; auctor.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>

<p><a href="../../ejercicios/ajax/soluciones/ejercicio8/ejercicio8.zip">Descargar ZIP con la solución completa</a></p>



    <div class="navigation row">
            <a class="span4 prev" href="ejercicio_7.html">&larr; Anterior <span>14.7. Ejercicio 7</span></a>
            
            <a class="span5 next" href="ejercicio_9.html">Siguiente &rarr; <span>14.9. Ejercicio 9</span></a>
        </div>
</div>

<div class="span3 side">
<h3 class="underline"><span>Compartir</span></h3>
<ul class="share">
    <li><a class="twitter" id="share_twitter" href="#" title="Compartir este artículo en Twitter">tw</a></li>
    <li><a class="facebook" id="share_facebook" href="#" title="Compartir este artículo en Facebook">fb</a></li>
    <li><a class="google" id="share_google" href="#" title="Compartir este artículo en Google+">g+</a></li>
</ul>

<script type="text/javascript">
var title    = 'Ejercicio 8 (Introducción a AJAX%29';
var page_url = encodeURIComponent(window.location);
var options  = 'menubar=no,toolbar=no,resizable=yes,scrollbars=no,width=640,height=350';
var services = {
    share_twitter:  'https://twitter.com/share?text=' + title + '&lang=es&hashtags=librosweb',
    share_facebook: 'http://www.facebook.com/sharer.php?u=' + page_url + '&t=' + title,
    share_google:   'https://plus.google.com/share?url=' + page_url + '&hl=es'
};

for (var id in services) { // don't use services.keys() for compatibility reasons
    if (services.hasOwnProperty(id)) {
        document.getElementById(id).href = services[id];
        document.getElementById(id).onclick = function(a) {
            a = a || window.event;
            a = a.target || a.srcElement;
            _gaq.push(['_trackEvent', 'share', a.id.substr(6), 'Introducción a AJAX : Ejercicio 8']);
            window.open(services[a.id], a.title, options);

            return false;
        };
    }
}
</script>

<h3 class="underline"><span>Indice de contenidos</span></h3>
<ul class="toc">
    <li class="level-1">
        <span>1</span> <a href="../capitulo_1.html"> Introducción a AJAX</a>
    </li>
    <li class="level-1">
        <span>2</span> <a href="../capitulo_2.html"> JavaScript básico</a>
    </li>
    <li class="level-1">
        <span>3</span> <a href="../capitulo_3.html"> JavaScript avanzado</a>
    </li>
    <li class="level-1">
        <span>4</span> <a href="../capitulo_4.html"> DOM (Document Object Model)</a>
    </li>
    <li class="level-1">
        <span>5</span> <a href="../capitulo_5.html"> BOM (Browser Object Model)</a>
    </li>
    <li class="level-1">
        <span>6</span> <a href="../capitulo_6.html"> Eventos</a>
    </li>
    <li class="level-1">
        <span>7</span> <a href="../capitulo_7.html"> Primeros pasos con AJAX</a>
    </li>
    <li class="level-1">
        <span>8</span> <a href="../capitulo_8.html"> Técnicas básicas con AJAX</a>
    </li>
    <li class="level-1">
        <span>9</span> <a href="../capitulo_9.html"> Técnicas avanzadas con AJAX</a>
    </li>
    <li class="level-1">
        <span>10</span> <a href="../capitulo_10.html"> Frameworks y librerías</a>
    </li>
    <li class="level-1">
        <span>11</span> <a href="../capitulo_11.html"> Otras utilidades</a>
    </li>
    <li class="level-1">
        <span>12</span> <a href="../capitulo_12.html"> Recursos útiles</a>
    </li>
    <li class="level-1">
        <span>13</span> <a href="../capitulo_13.html"> Bibliografía</a>
    </li>
    <li class="level-1 ">
        <a href="../capitulo_14.html">
            <span>Capítulo 14.</span> Ejercicios resueltos
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_2.html">
            <span>14.2.</span> Ejercicio 2
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_3.html">
            <span>14.3.</span> Ejercicio 3
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_4.html">
            <span>14.4.</span> Ejercicio 4
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_5.html">
            <span>14.5.</span> Ejercicio 5
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_6.html">
            <span>14.6.</span> Ejercicio 6
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_7.html">
            <span>14.7.</span> Ejercicio 7
        </a>
    </li>
    <li class="level-2 active">
        <a href="ejercicio_8.html">
            <span>14.8.</span> Ejercicio 8
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_9.html">
            <span>14.9.</span> Ejercicio 9
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_10.html">
            <span>14.10.</span> Ejercicio 10
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_11.html">
            <span>14.11.</span> Ejercicio 11
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_12.html">
            <span>14.12.</span> Ejercicio 12
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_13.html">
            <span>14.13.</span> Ejercicio 13
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_14.html">
            <span>14.14.</span> Ejercicio 14
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_15.html">
            <span>14.15.</span> Ejercicio 15
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_16.html">
            <span>14.16.</span> Ejercicio 16
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_17.html">
            <span>14.17.</span> Ejercicio 17
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_18.html">
            <span>14.18.</span> Ejercicio 18
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_19.html">
            <span>14.19.</span> Ejercicio 19
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_20.html">
            <span>14.20.</span> Ejercicio 20
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_21.html">
            <span>14.21.</span> Ejercicio 21
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_22.html">
            <span>14.22.</span> Ejercicio 22
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejercicio_23.html">
            <span>14.23.</span> Ejercicio 23
        </a>
    </li>
</ul>
</div>
        </div></div>
        <div id="footer" class="row">
            <span class="span6">&copy; 2013 LibrosWeb.es 
            <a href="../../contacto/index.html">Contacto</a></span>
            <span class="span6 version">2.340 días online</span>
        </div>
    </div>
    </body>
</html>

<!-- Localized -->