<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>8.2. Calendario (Introducción a JavaScript)</title>
        <link href="../../css/main-fa23fb7.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-82842-2']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
        <link rel="apple-touch-icon" type="image/png" href="../../apple-touch-icon.png" />
        <link rel="apple-touch-icon-precomposed" type="image/png" href="../../apple-touch-icon.png" />
        <meta name="apple-mobile-web-app-title" content="LibrosWeb" />

        <link rel="shortcut icon" type="image/png" href="../../favicon.png" />
        <meta name="site:version" content="fa23fb7" />
        <link rel="author" href="https://plus.google.com/u/0/107307901774377088868" />
        <link rel="prev" href="relojes_contadores_e_intervalos_de_tiempo.html" />
        <link rel="next" href="tooltip.html" />
        <link rel="start" href="../index.html" />
        <meta name="twitter:site" content="@librosweb" />
        <link rel="search" type="application/opensearchdescription+xml" href="http://librosweb.es/opensearch/documentation.xml" title="Libros y tutoriales de LibrosWeb.es" />
        <meta property="fb:page_id" content="437758756273955" />
        <meta property="fb:app_id" content="437758756273955" />
        <meta property="og:type" content="website" />
        <meta property="og:title" content="8.2. Calendario (Introducción a JavaScript)" />
        <meta property="og:image" content="http://www.gravatar.com/avatar/9f219b4dfaa677bfd0f47753c02d5126.png?s=200" />
        <meta name="msapplication-TileColor" content="#CC1414" />
        <meta name="application-name" content="LibrosWeb" />
        <meta name="msapplication-tooltip" content="Libros y tutoriales sobre HTML, CSS, JavaScript, PHP y otras tecnologías web." />
    </head>
    <body class="book_page javascript">
    <div id="container" class="container">
        <div id="header">
            <h1><a href="../../index.html" title="LibrosWeb.es">LibrosWeb</a></h1>
            <form action="/buscar"><input type="text" placeholder="buscar..." name="q"/></form>
        </div>
        <div id="content"><div class="row">
        <ul class="breadcrumbs span12">
  <li><a href="../../index.html">Inicio</a></li>
  <li><a href="../index.html">Introducción a JavaScript</a></li>
  <li><a href="../capitulo_8.html">Capítulo 8. Otras utilidades</a></li>
  <li class="current"><span>8.2. Calendario</span></li>
</ul>

<div class="span9">
    <h1 id="calendario"><span>8.2.</span> Calendario</h1>
    

<p>Cuando una aplicación muestra un formulario para que el usuario inserte sus datos, la información más complicada de obtener siempre suelen ser los números de teléfono y las fechas. El motivo es que existen muchas formas diferentes de indicar estos datos. Las fechas por ejemplo se pueden indicar como <code>dd/mm/aa</code>, <code>dd/mm/aaaa</code>, <code>aaaa/mm/dd</code>, <code>dd-mm-aa</code>, <code>dd mm aaaa</code>, etc.</p>

<p>Los métodos más utilizados para que el usuario introduzca la información relativa a una fecha suelen ser un cuadro de texto en el que tiene que insertar la fecha completa (indicándole el formato que debe seguir) o un cuadro de texto para el día, una lista desplegable para el mes y otro cuadro de texto para el año.</p>

<p>En cualquier caso, para el usuario suele ser más cómodo que la aplicación incluya un calendario en el que pueda indicar la fecha pinchando sobre el día elegido:</p>

<div class="figure" id="figure_8_1">
    <img src="../../img/javascript/f0801.gif" alt="Aspecto de un calendario creado con JavaScript" />

    <p class="caption"><strong>Figura 8.1</strong> Aspecto de un calendario creado con JavaScript</p>
</div>


<p>Además, este método es menos propenso a cometer errores, ya que si el calendario está bien construido, no es posible introducir fechas inválidas y tampoco es posible insertar las fechas en un formato incorrecto.</p>

<p>No obstante, realizar un calendario completo en JavaScript no es una tarea trivial, por lo que no se va a estudiar su desarrollo completo. Afortunadamente, existen scripts gratuitos para mostrar calendarios y que permiten su uso libre incluso en aplicaciones comerciales.</p>

<p>De entre todos los calendarios disponibles, uno de los más completos es el desarrollado por la empresa DynArch, que se puede acceder desde su página web oficial: http://www.dynarch.com/projects/calendar/ y que se puede descargar gratuitamente desde http://sourceforge.net/projects/jscalendar/ El archivo descargado incluye todos los scripts necesarios, su documentación, ejemplos de uso, diferentes estilos CSS para el calendario, etc.</p>

<p>A continuación se indican los pasos necesarios para incluir un calendario básico en cualquier página web:</p>

<p>1) Enlazar los archivos JavaScript y CSS requeridos:</p>

<p>Se descomprime el archivo descargado, se guardan los archivos JavaScript y CSS en el sitio adecuado (en este ejemplo se supone que los archivos JavaScript se guardan en el directorio <code>js/</code> y los archivos CSS en el directorio <code>css/</code>) y se enlazan directamente desde la cabecera de la página HTML.</p>

<div class="code html">
<pre class="html5"><span class="sc2">&lt;<span class="kw2">head</span>&gt;</span>
...
<span class="sc2">&lt;<span class="kw2">style</span> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;text/css&quot;</span>&gt;</span>@import url(&quot;css/calendar-estilo.css&quot;);<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">style</span>&gt;</span>
<span class="sc2">&lt;<span class="kw2">script</span> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;text/javascript&quot;</span> <span class="kw3">src</span><span class="sy0">=</span><span class="st0">&quot;js/calendar.js&quot;</span> <span class="sy0">/</span>&gt;</span>
<span class="sc2">&lt;<span class="kw2">script</span> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;text/javascript&quot;</span> <span class="kw3">src</span><span class="sy0">=</span><span class="st0">&quot;js/calendar-es.js&quot;</span> <span class="sy0">/</span>&gt;</span>
<span class="sc2">&lt;<span class="kw2">script</span> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;text/javascript&quot;</span> <span class="kw3">src</span><span class="sy0">=</span><span class="st0">&quot;js/calendar-setup.js&quot;</span> <span class="sy0">/</span>&gt;</span>
...
<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">head</span>&gt;</span></pre>
</div>

<p>El calendario incluye traducciones a más de 40 idiomas, entre los que se encuentra el español. Para mostrar el calendario en un determinado idioma, tan solo es necesario enlazar el archivo del idioma correspondiente. Las traducciones se encuentran en el directorio <code>lang</code> y su formato es <code>calendar-XX.js</code>, donde <code>XX</code> es el código del idioma.</p>

<p>2) Añadir el código XHTML necesario para el elemento que va a mostrar el calendario:</p>

<div class="code html">
<pre class="html5"><span class="sc2">&lt;<span class="kw2">p</span>&gt;</span>Introduce la fecha pulsando sobre la imagen del calendario<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">p</span>&gt;</span>
<span class="sc2">&lt;<span class="kw2">input</span> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;text&quot;</span> <span class="kw3">name</span><span class="sy0">=</span><span class="st0">&quot;date&quot;</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;fecha&quot;</span> <span class="kw3">readonly</span><span class="sy0">=</span><span class="st0">&quot;readonly&quot;</span> <span class="sy0">/</span>&gt;</span>
<span class="sc2">&lt;<span class="kw2">img</span> <span class="kw3">src</span><span class="sy0">=</span><span class="st0">&quot;calendario.png&quot;</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;selector&quot;</span> <span class="sy0">/</span>&gt;</span></pre>
</div>

<p>En este caso, el calendario está formado por dos elementos:</p>

<ul>
<li>Un cuadro de texto llamado <code>fecha</code> y que almacena el valor introducido por el usuario. Como se le ha asignado un atributo <code>readonly="readonly"</code>, el usuario no puede modificar su valor.</li>
<li>Una pequeña imagen o icono que se utiliza para activar el calendario. Cuando el usuario pincha con el ratón sobre la imagen, se muestra el calendario de JavaScript.</li>
</ul>

<p>3) Configurar el calendario:</p>

<div class="code javascript">
<pre class="javascript"><span class="sy0">&lt;</span>script type<span class="sy0">=</span><span class="st0">&quot;text/javascript&quot;</span><span class="sy0">&gt;</span>
window.<span class="me1">onload</span> <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  Calendar.<span class="me1">setup</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
    inputField<span class="sy0">:</span> <span class="st0">&quot;fecha&quot;</span><span class="sy0">,</span>
    ifFormat<span class="sy0">:</span>   <span class="st0">&quot;%d / %m / %Y&quot;</span><span class="sy0">,</span>
    button<span class="sy0">:</span>     <span class="st0">&quot;selector&quot;</span>
  <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="sy0">&lt;/</span>script<span class="sy0">&gt;</span></pre>
</div>

<p>Una vez enlazados los archivos del calendario y preparado el código XHTML, es necesario inicializar y configurar el calendario. La configuración del calendario consiste en establecer el valor de alguna de sus propiedades. Las propiedades básicas imprescindibles son:</p>

<ul>
<li><code>inputField</code>: se trata del atributo <code>id</code> del elemento en el que se mostrará la fecha seleccionada, en este ejemplo sería <code>fecha</code>.</li>
<li><code>ifFormat</code>: formato en el que se mostrará la fecha una vez seleccionada (en este caso se ha optado por el formato <code>dd / mm / aaaa</code>).</li>
<li><code>button</code>: atributo <code>id</code> del elemento que se pulsa (botón, imagen, enlace) para mostrar el calendario de selección de fecha. En este ejemplo, el <code>id</code> de la imagen es <code>selector</code>.</li>
</ul>

<p>Después de esta configuración básica, el calendario ya puede utilizarse en la aplicación:</p>

<p>1) Aspecto por defecto del selector de calendario:</p>

<div class="figure" id="figure_8_2">
    <img src="../../img/javascript/f0802.gif" alt="Elementos XHTML del calendario JavaScript: cuadro de texto e icono" />

    <p class="caption"><strong>Figura 8.2</strong> Elementos XHTML del calendario JavaScript: cuadro de texto e icono</p>
</div>


<p>2) Al pinchar una vez sobre la imagen del calendario:</p>

<div class="figure" id="figure_8_3">
    <img src="../../img/javascript/f0803.gif" alt="Aspecto inicial del calendario JavaScript cuando se abre por primera vez" />

    <p class="caption"><strong>Figura 8.3</strong> Aspecto inicial del calendario JavaScript cuando se abre por primera vez</p>
</div>


<p>Se muestra el calendario con el aspecto e idioma establecidos y aparece resaltada la fecha del día actual.</p>

<p>3) Se selecciona la fecha deseada:</p>

<div class="figure" id="figure_8_4">
    <img src="../../img/javascript/f0804.gif" alt="Seleccionando una fecha en el calendario JavaScript" />

    <p class="caption"><strong>Figura 8.4</strong> Seleccionando una fecha en el calendario JavaScript</p>
</div>


<p>4) Después de pinchar con el ratón sobre la fecha deseada:</p>

<div class="figure" id="figure_8_5">
    <img src="../../img/javascript/f0805.gif" alt="El cuadro de texto muestra la fecha establecida por el usuario con el calendario JavaScript" />

    <p class="caption"><strong>Figura 8.5</strong> El cuadro de texto muestra la fecha establecida por el usuario con el calendario JavaScript</p>
</div>


<p>Al pulsar con el ratón sobre la fecha deseada, el calendario se cierra automáticamente y el cuadro de texto muestra la fecha seleccionada con el formato indicado en la configuración del calendario. Si se vuelve a abrir el calendario para seleccionar otra fecha, se mostrará resaltada la fecha del día seleccionado y no la fecha del día actual.</p>

<p><div class="exercise"><p class="title">Ejercicio 18</p> Mejorar el calendario creado añadiendo las opciones necesarias para que muestre el siguiente aspecto:</p>

<div class="figure" id="figure_8_6">
    <img src="../../img/javascript/f0806.gif" alt="Aspecto mejorado del calendario JavaScript" />

    <p class="caption"><strong>Figura 8.6</strong> Aspecto mejorado del calendario JavaScript</p>
</div>


<ol>
<li>Que no se muestre el número de la semana en el calendario (pista: <code>weekNumbers</code>)</li>
<li>Modificar el formato en el que se muestra la fecha seleccionada. El formato original es <code>21 / 08 / 2007</code> (indicado como <code>%d / %m / %Y</code>). El formato deseado es <code>Martes, 21 de Agosto de 2007</code> (pistas: <code>%A</code>, <code>%B</code>)</li>
<li>El nuevo formato de fecha es mucho más agradable para los usuarios, pero más incómodo para los scripts que tienen que manejarlo. Afortunadamente, el calendario dispone de la posibilidad de guardar dos valores: un valor para mostrar a los usuarios y otro valor para que lo procesen los scripts. Cuando el usuario seleccione una fecha, la fecha con el formato original se debe almacenar en un campo oculto de formulario y el otro formato más largo debe mostrar al usuario en un elemento de tipo <code>&lt;span&gt;</code> (pistas: <code>displayArea</code>, <code>daFormat</code>)</li>
</ol>

<p><a href="../capitulo_11/ejercicio_18.html">Ver solución</a></div></p>



    <div class="navigation row">
            <a class="span4 prev" href="relojes_contadores_e_intervalos_de_tiempo.html">&larr; Anterior <span>8.1. Relojes, contadores e intervalos de tiempo</span></a>
            
            <a class="span5 next" href="tooltip.html">Siguiente &rarr; <span>8.3. Tooltip</span></a>
        </div>
</div>

<div class="span3 side">
<h3 class="underline"><span>Compartir</span></h3>
<ul class="share">
    <li><a class="twitter" id="share_twitter" href="#" title="Compartir este artículo en Twitter">tw</a></li>
    <li><a class="facebook" id="share_facebook" href="#" title="Compartir este artículo en Facebook">fb</a></li>
    <li><a class="google" id="share_google" href="#" title="Compartir este artículo en Google+">g+</a></li>
</ul>

<script type="text/javascript">
var title    = 'Calendario (Introducción a JavaScript%29';
var page_url = encodeURIComponent(window.location);
var options  = 'menubar=no,toolbar=no,resizable=yes,scrollbars=no,width=640,height=350';
var services = {
    share_twitter:  'https://twitter.com/share?text=' + title + '&lang=es&hashtags=librosweb',
    share_facebook: 'http://www.facebook.com/sharer.php?u=' + page_url + '&t=' + title,
    share_google:   'https://plus.google.com/share?url=' + page_url + '&hl=es'
};

for (var id in services) { // don't use services.keys() for compatibility reasons
    if (services.hasOwnProperty(id)) {
        document.getElementById(id).href = services[id];
        document.getElementById(id).onclick = function(a) {
            a = a || window.event;
            a = a.target || a.srcElement;
            _gaq.push(['_trackEvent', 'share', a.id.substr(6), 'Introducción a JavaScript : Calendario']);
            window.open(services[a.id], a.title, options);

            return false;
        };
    }
}
</script>

<h3 class="underline"><span>Indice de contenidos</span></h3>
<ul class="toc">
    <li class="level-1">
        <span>1</span> <a href="../capitulo_1.html"> Introducción</a>
    </li>
    <li class="level-1">
        <span>2</span> <a href="../capitulo_2.html"> El primer script</a>
    </li>
    <li class="level-1">
        <span>3</span> <a href="../capitulo_3.html"> Programación básica</a>
    </li>
    <li class="level-1">
        <span>4</span> <a href="../capitulo_4.html"> Programación avanzada</a>
    </li>
    <li class="level-1">
        <span>5</span> <a href="../capitulo_5.html"> DOM</a>
    </li>
    <li class="level-1">
        <span>6</span> <a href="../capitulo_6.html"> Eventos</a>
    </li>
    <li class="level-1">
        <span>7</span> <a href="../capitulo_7.html"> Formularios</a>
    </li>
    <li class="level-1 ">
        <a href="../capitulo_8.html">
            <span>Capítulo 8.</span> Otras utilidades
        </a>
    </li>
    <li class="level-2 ">
        <a href="relojes_contadores_e_intervalos_de_tiempo.html">
            <span>8.1.</span> Relojes, contadores e intervalos de tiempo
        </a>
    </li>
    <li class="level-2 active">
        <a href="calendario.html">
            <span>8.2.</span> Calendario
        </a>
    </li>
    <li class="level-2 ">
        <a href="tooltip.html">
            <span>8.3.</span> Tooltip
        </a>
    </li>
    <li class="level-2 ">
        <a href="menu_desplegable.html">
            <span>8.4.</span> Menú desplegable
        </a>
    </li>
    <li class="level-2 ">
        <a href="galerias_de_imagenes_lightbox.html">
            <span>8.5.</span> Galerías de imágenes (Lightbox)
        </a>
    </li>
    <li class="level-1">
        <span>9</span> <a href="../capitulo_9.html"> Detección y corrección de errores</a>
    </li>
    <li class="level-1">
        <span>10</span> <a href="../capitulo_10.html"> Recursos útiles</a>
    </li>
    <li class="level-1">
        <span>11</span> <a href="../capitulo_11.html"> Ejercicios resueltos</a>
    </li>
</ul>
</div>
        </div></div>
        <div id="footer" class="row">
            <span class="span6">&copy; 2013 LibrosWeb.es 
            <a href="../../contacto/index.html">Contacto</a></span>
            <span class="span6 version">2.340 días online</span>
        </div>
    </div>
    </body>
</html>

<!-- Localized -->