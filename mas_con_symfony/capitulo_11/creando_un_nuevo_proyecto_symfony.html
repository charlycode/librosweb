<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>11.6. Creando un nuevo proyecto Symfony (Más con Symfony)</title>
        <link href="../../css/main-fa23fb7.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-82842-2']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
        <link rel="apple-touch-icon" type="image/png" href="../../apple-touch-icon.png" />
        <link rel="apple-touch-icon-precomposed" type="image/png" href="../../apple-touch-icon.png" />
        <meta name="apple-mobile-web-app-title" content="LibrosWeb" />

        <link rel="shortcut icon" type="image/png" href="../../favicon.png" />
        <meta name="site:version" content="fa23fb7" />
        <link rel="author" href="https://plus.google.com/u/0/107307901774377088868" />
        <link rel="prev" href="instalacion_y_uso_del_sandbox_de_symfony.html" />
        <link rel="next" href="../capitulo_12.html" />
        <link rel="start" href="../index.html" />
        <meta name="twitter:site" content="@librosweb" />
        <link rel="search" type="application/opensearchdescription+xml" href="http://librosweb.es/opensearch/documentation.xml" title="Libros y tutoriales de LibrosWeb.es" />
        <meta property="fb:page_id" content="437758756273955" />
        <meta property="fb:app_id" content="437758756273955" />
        <meta property="og:type" content="website" />
        <meta property="og:title" content="11.6. Creando un nuevo proyecto Symfony (Más con Symfony)" />
        <meta property="og:image" content="http://www.gravatar.com/avatar/9f219b4dfaa677bfd0f47753c02d5126.png?s=200" />
        <meta name="msapplication-TileColor" content="#CC1414" />
        <meta name="application-name" content="LibrosWeb" />
        <meta name="msapplication-tooltip" content="Libros y tutoriales sobre HTML, CSS, JavaScript, PHP y otras tecnologías web." />
    </head>
    <body class="book_page mas_con_symfony">
    <div id="container" class="container">
        <div id="header">
            <h1><a href="../../index.html" title="LibrosWeb.es">LibrosWeb</a></h1>
            <form action="/buscar"><input type="text" placeholder="buscar..." name="q"/></form>
        </div>
        <div id="content"><div class="row">
        <ul class="breadcrumbs span12">
  <li><a href="../../index.html">Inicio</a></li>
  <li><a href="../index.html">Más con Symfony</a></li>
  <li><a href="../capitulo_11.html">Capítulo 11. Windows y Symfony</a></li>
  <li class="current"><span>11.6.. Creando un nuevo proyecto Symfony</span></li>
</ul>

<div class="span9">
    <h1 id="creando_un_nuevo_proyecto_symfony"><span>11.6.</span> Creando un nuevo proyecto Symfony</h1>
    

<p>Crear un entorno adecuado para desarrollar proyectos Symfony es casi tan sencillo
como la instalación del sandbox. De hecho, se va a explicar la versión simplificada
del proceso de instalación ya que es equivalente a la instalación del sandbox.</p>

<p>La principal diferencia es que en este caso nos vamos a centrar en la configuración
necesaria para que la aplicación web pueda ser accedida desde cualquier lugar
de Internet.</p>

<p>Al igual que el sandbox, el proyecto Symfony viene preconfigurado para utilizar
SQLite como base de datos, que ya se instaló y configuró en las secciones
previas de este capítulo.</p>

<h3 id="descargar_crear_el_directorio_y_copiar_los_archivos">11.6.1. Descargar, crear el directorio y copiar los archivos</h3>

<p>Cada versión de Symfony se puede descargar mediante un archivo <code>.zip</code> para
poder crear después cada proyecto desde cero.</p>

<p><a href="http://www.symfony-project.org/get/symfony-1.3.0.zip">Descarga el archivo de Symfony</a>
desde su sitio web y extrae sus contenidos en un directorio temporal, como por
ejemplo el directorio <em>"downloads"</em>.</p>

<div class="figure" id="figure_11_36">
    <img src="../../img/mas_con_symfony/windows_37.png" alt="Explorador de Windows - Descargar y descomprimir el archivo del proyecto." />

    <p class="caption"><strong>Figura 11.36</strong> Explorador de Windows - Descargar y descomprimir el archivo del proyecto.</p>
</div>


<p>Ahora debemos crear el directorio definitivo donde residirán las librerías de
Symfony. Este paso es ahora un poco más complicado que para el sandbox.</p>

<h3 id="estructura_de_directorios">11.6.2. Estructura de directorios</h3>

<p>A continuación se crea la estructura de directorios del proyecto. Si se comienza
por la raíz de la unidad <code>D:</code> por ejemplo, se crea un directorio llamado <code>\dev</code>
y después otro directorio llamado <code>sfproject</code>:</p>

<div class="code cli">
<pre class="cli">D:
MD dev
CD dev
MD sfproject
CD sfproject</pre>
</div>

<p>Ahora ya nos encontramos en <code>D:\dev\sfproject</code> y a partir de aquí se completa el
resto de la estructura creando los directorios <code>lib</code>, <code>vendor</code> y <code>symfony</code> de
forma consecutiva y en cascada:</p>

<div class="code cli">
<pre class="cli">MD lib
CD lib
MD vendor
CD vendor
MD symfony
CD symfony</pre>
</div>

<p>Ahora ya nos encontramos en el directorio: <code>D:\dev\sfproject\lib\vendor\symfony</code></p>

<div class="figure" id="figure_11_37">
    <img src="../../img/mas_con_symfony/windows_38.png" alt="Explorador de Windows - La estructura de directorios del proyecto." />

    <p class="caption"><strong>Figura 11.37</strong> Explorador de Windows - La estructura de directorios del proyecto.</p>
</div>


<p>Selecciona todos los archivos descomprimidos en el directorio temporal y
cópialos en el directorio <code>D:\dev\sfproject\lib\vendor\symfony</code>. Verás que se
están copiando 3819 archivos en el directorio de destino:</p>

<div class="figure" id="figure_11_38">
    <img src="../../img/mas_con_symfony/windows_39.png" alt="Explorador de Windows - Copiando 3819 archivos." />

    <p class="caption"><strong>Figura 11.38</strong> Explorador de Windows - Copiando 3819 archivos.</p>
</div>


<h3 id="creacion_e_inicializacion">11.6.3. Creación e inicialización</h3>

<p>Abre la consola de comandos, dirígete al directorio <code>D:\dev\sfproject</code> y ejecuta
el siguiente comando:</p>

<div class="code cli">
<pre class="cli">PHP lib\vendor\symfony\data\bin\symfony -V</pre>
</div>

<p>El resultado del comando anterior debería ser el siguiente:</p>

<div class="code cli">
<pre class="cli">symfony version 1.3.0 (D:\dev\sfproject\lib\vendor\symfony\lib)</pre>
</div>

<p>Para inicializar el proyecto, ejecuta el siguiente comando:</p>

<div class="code cli">
<pre class="cli">PHP lib\vendor\symfony\data\bin\symfony generate:project sfproject</pre>
</div>

<p>El resultado del comando anterior es una serie de operaciones sobre los archivos
y directorios, incluyendo varios comandos de tipo <code>chmod 777</code>:</p>

<div class="figure" id="figure_11_39">
    <img src="../../img/mas_con_symfony/windows_40.png" alt="Explorador de Windows - Inicialización correcta del proyecto." />

    <p class="caption"><strong>Figura 11.39</strong> Explorador de Windows - Inicialización correcta del proyecto.</p>
</div>


<p>Desde la misma consola de comandos, crea una nueva aplicación de Symfony mediante
el siguiente comando:</p>

<div class="code cli">
<pre class="cli">PHP lib\vendor\symfony\data\bin\symfony generate:app sfapp</pre>
</div>

<p>Una vez más deberías ver una lista de operaciones sobre archivos y directorios,
incluyendo varias operaciones de tipo <code>chmod 777</code>.</p>

<p>A partir de ahora, en vez de teclear <code>PHP lib\vendor\symfony\data\bin\symfony</code>
cada vez que ejecutes un comando, puedes copiar en este directorio el archivo
<code>symfony.bat</code>:</p>

<div class="code cli">
<pre class="cli">copy lib\vendor\symfony\data\bin\symfony.bat</pre>
</div>

<p>Ahora se dispone de un atajo para ejecutar todos los comandos de Symfony desde
el directorio <code>D:\dev\sfproject</code>. De hecho, ejecuta el siguiente comando desde
el directorio <code>D:\dev\sfproject</code>:</p>

<div class="code cli">
<pre class="cli">symfony -V</pre>
</div>

<p>Si todo funciona bien, deberías ver exactamente el mismo resultado que antes:</p>

<div class="code cli">
<pre class="cli">symfony version 1.3.0 (D:\dev\sfproject\lib\vendor\symfony\lib)</pre>
</div>

<h3 id="creando_la_aplicacion_web">11.6.4. Creando la aplicación web</h3>

<p>Las siguientes secciones asumen que has leído la parte anterior de este capítulo
en la que se explica cómo hacer que el <em>"Default Web Site"</em> no interfiera en
el puerto 80 del servidor web.</p>

<h4 id="anadir_un_nuevo_sitio_web_para_el_proyecto">11.6.4.1. Añadir un nuevo sitio web para el proyecto</h4>

<p>Accede a las <em>Administration Tools</em> para abrir el <em>IIS Manager</em>. En la columna
de la izquierda, pulsa el botón derecho sobre el icono <em>"Sites"</em>. Selecciona la
opción <em>"Add Web Site"</em> e introduce <em>"Symfony Project"</em> como nombre del sitio
web, <code>D:\dev\sfproject</code> como valor de la opción <em>"Physical Path"</em> y deja todos
las demás opciones sin cambiar:</p>

<div class="figure" id="figure_11_40">
    <img src="../../img/mas_con_symfony/windows_41.png" alt="IIS Manager - Añadir un nuevo sitio web." />

    <p class="caption"><strong>Figura 11.40</strong> IIS Manager - Añadir un nuevo sitio web.</p>
</div>


<p>Pincha sobre el botón OK. Si se muestra una pequeña <code>x</code> en el icono del sitio
web (dentro de <em>Features View / Sites</em>) puedes hacerla desaparecer pinchando
sobre el <em>"Restart"</em> que se muestra a la derecha.</p>

<h4 id="comprobar_si_el_sitio_web_responde">11.6.4.2. Comprobar si el sitio web responde</h4>

<p>Selecciona el sitio <em>"Symfony Project"</em> en el <em>IIS Manager</em> y en la columna
derecha pincha sobre la opción <em>"Browse *.80 (http)"</em>.</p>

<p>Seguidamente verás el mismo mensaje de error que se producía al realizar la
misma operación sobre el sandbox:</p>

<div class="code cli">
<pre class="cli">HTTP Error 403.14 - Forbidden</pre>
</div>

<p>Al igual que en el caso del sandbox, el servidor web está configurado para no
mostrar un listado de los contenidos del directorio.</p>

<p>Accede con tu navegador a la URL <code>http://localhost/web</code> para ver la famosa página
<em>"Symfony Project Created"</em>, aunque en este caso existe una pequeña diferencia
respecto al sandbox ya que no se ve ninguna imagen:</p>

<div class="figure" id="figure_11_41">
    <img src="../../img/mas_con_symfony/windows_42.png" alt="Internet Explorer - Creado el proyecto Symfony, pero sin imágenes." />

    <p class="caption"><strong>Figura 11.41</strong> Internet Explorer - Creado el proyecto Symfony, pero sin imágenes.</p>
</div>


<p>Las imágenes no se muestran por pantalla, pero se encuentran en un directorio
llamado <code>sf</code> dentro de la librería de Symfony. Hacer que se vean es muy sencillo,
ya que solamente hay que crear un directorio virtual en <code>/web</code> llamado <code>sf</code> y
que apunte a <code>D:\dev\sfproject\lib\vendor\symfony\data\web\sf</code>.</p>

<div class="figure" id="figure_11_42">
    <img src="../../img/mas_con_symfony/windows_43.png" alt="IIS Manager - Añadir un directorio virtual sf." />

    <p class="caption"><strong>Figura 11.42</strong> IIS Manager - Añadir un directorio virtual sf.</p>
</div>


<p>Después de realizar los cambios anteriores, ya puedes ver las imágenes en la
página <em>"Symfony Project Created"</em>:</p>

<div class="figure" id="figure_11_43">
    <img src="../../img/mas_con_symfony/windows_44.png" alt="Internet Explorer - Creado el proyecto Symfony con imágenes." />

    <p class="caption"><strong>Figura 11.43</strong> Internet Explorer - Creado el proyecto Symfony con imágenes.</p>
</div>


<p>Ahora la aplicación Symfony completa ya está funcionando. Para comprobarlo,
accede con un navegador a la URL de la aplicación en <code>http://localhost/web/sfapp_dev.php</code>:</p>

<div class="figure" id="figure_11_44">
    <img src="../../img/mas_con_symfony/windows_45.png" alt="Internet Explorer - sfapp_dev.php se accede correctamente desde localhost." />

    <p class="caption"><strong>Figura 11.44</strong> Internet Explorer - sfapp_dev.php se accede correctamente desde localhost.</p>
</div>


<p>Antes de concluir, podemos realizar una última comprobación en local: observa
los paneles "configuration", "logs" y "timers" de la barra de depuración web
para asegurar que el proyecto es completamente funcional.</p>

<div class="figure" id="figure_11_45">
    <img src="../../img/mas_con_symfony/windows_46.png" alt="Internet Explorer - Los mensajes de log se pueden acceder desde localhost." />

    <p class="caption"><strong>Figura 11.45</strong> Internet Explorer - Los mensajes de log se pueden acceder desde localhost.</p>
</div>


<h3 id="configurar_la_aplicacion_para_que_se_pueda_acceder_desde_internet">11.6.5. Configurar la aplicación para que se pueda acceder desde Internet</h3>

<p>Al igual que el sandox, el proyecto de Symfony ya funciona bien en local, por
lo que sólo se puede acceder desde <code>http://localhost</code> o <code>http://127.0.0.1</code>. A
continuación se configura para que se pueda acceder desde cualquier lugar de
Internet.</p>

<p>La configuración por defecto del proyecto impide que la aplicación se pueda
ejecutar desde un lugar remoto, aunque en principio debería permitirse ejecutar
tanto el archivo <code>index.php</code> como <code>sfapp_dev.php</code>. Si accedes al proyecto desde
el servidor web mediante la IP externa del servidor virtual dedicado (por ejemplo
<code>94.125.163.150</code>) o mediante su nombre completo (por ejemplo <code>12543hpv163150.ikoula.com</code>).
También puedes probar esas direcciones desde el propio servidor, ya que no están
mapeadas al <code>127.0.0.1</code>:</p>

<div class="figure" id="figure_11_46">
    <img src="../../img/mas_con_symfony/windows_47.png" alt="Internet Explorer - Se permite el acceso a index.php desde Internet." />

    <p class="caption"><strong>Figura 11.46</strong> Internet Explorer - Se permite el acceso a index.php desde Internet.</p>
</div>


<div class="figure" id="figure_11_47">
    <img src="../../img/mas_con_symfony/windows_48.png" alt="Internet Explorer - No se permite el acceso a sfapp_dev.php desde Internet." />

    <p class="caption"><strong>Figura 11.47</strong> Internet Explorer - No se permite el acceso a sfapp_dev.php desde Internet.</p>
</div>


<p>Anteriormente se comentó que sería posible acceder a <code>index.php</code> y <code>sfapp_dev.php</code>
desde un lugar remoto. No obstante, la ejecución de <code>sfapp_dev.php</code> falla porque
por defecto no es posible su acceso remoto. Se trata de una medida de seguridad
para impedir que los usuarios maliciosos puedan tener acceso al entorno de
desarrollo, que contiene información potencialmente sensible sobre tu proyecto.
Aunque puedes editar el archivo <code>sfapp_dev.php</code> para permitir el acceso remoto,
te recomendamos encarecidamente que no lo hagas nunca bajo ninguna circunstancia.</p>

<p>El último paso consiste en simular un nombre de dominio real mediante la
configuración del archivo <em>"hosts"</em>. Este archivo realiza la resolución local
de nombres sin tener que instalar el servicio DNS de Windows, que está disponible
en todas las ediciones de Windows Server 2008 R2 y también en las ediciones
Windows Server 2008 Standard, Enterprise y Datacenter.</p>

<p>En los sistemas operativos tipo Windows x64, el archivo <code>hosts</code> se encuentra en:
<code>C:\Windows\SysWOW64\Drivers\etc</code></p>

<p>Inicialmente el archivo <code>hosts</code> incluye la información necesaria para que el
servidor pueda resolver <code>localhost</code> a <code>127.0.0.1</code> en IPv4 y a <code>::1</code> en IPv6.</p>

<p>A continuación se añade un nombre de dominio válido pero falso, como por ejemplo
<code>sfwebapp.local</code> y se resuelve como el propio servidor local.</p>

<div class="figure" id="figure_11_48">
    <img src="../../img/mas_con_symfony/windows_50.png" alt="Cambios aplicados en el directorio &quot;hosts&quot;." />

    <p class="caption"><strong>Figura 11.48</strong> Cambios aplicados en el directorio &quot;hosts&quot;.</p>
</div>


<p>El proyecto Symfony ya se puede acceder remotamente, sin necesidad de DNS, a
través de cualquier navegador instalado en el propio servidor web.</p>


    <div class="navigation row">
            <a class="span4 prev" href="instalacion_y_uso_del_sandbox_de_symfony.html">&larr; Anterior <span>11.5. Instalación y uso del sandbox de Symfony</span></a>
            
            <a class="span5 next" href="../capitulo_12.html">Siguiente &rarr; <span>Capítulo 12. Desarrollando aplicaciones Facebook</span></a>
        </div>
</div>

<div class="span3 side">
<h3 class="underline"><span>Compartir</span></h3>
<ul class="share">
    <li><a class="twitter" id="share_twitter" href="#" title="Compartir este artículo en Twitter">tw</a></li>
    <li><a class="facebook" id="share_facebook" href="#" title="Compartir este artículo en Facebook">fb</a></li>
    <li><a class="google" id="share_google" href="#" title="Compartir este artículo en Google+">g+</a></li>
</ul>

<script type="text/javascript">
var title    = 'Creando un nuevo proyecto Symfony (Más con Symfony%29';
var page_url = encodeURIComponent(window.location);
var options  = 'menubar=no,toolbar=no,resizable=yes,scrollbars=no,width=640,height=350';
var services = {
    share_twitter:  'https://twitter.com/share?text=' + title + '&lang=es&hashtags=librosweb',
    share_facebook: 'http://www.facebook.com/sharer.php?u=' + page_url + '&t=' + title,
    share_google:   'https://plus.google.com/share?url=' + page_url + '&hl=es'
};

for (var id in services) { // don't use services.keys() for compatibility reasons
    if (services.hasOwnProperty(id)) {
        document.getElementById(id).href = services[id];
        document.getElementById(id).onclick = function(a) {
            a = a || window.event;
            a = a.target || a.srcElement;
            _gaq.push(['_trackEvent', 'share', a.id.substr(6), 'Más con Symfony : Creando un nuevo proyecto Symfony']);
            window.open(services[a.id], a.title, options);

            return false;
        };
    }
}
</script>

<h3 class="underline"><span>Indice de contenidos</span></h3>
<ul class="toc">
    <li class="level-1">
        <span>1</span> <a href="../capitulo_1.html"> Introducción</a>
    </li>
    <li class="level-1">
        <span>2</span> <a href="../capitulo_2.html"> Enrutamiento avanzado</a>
    </li>
    <li class="level-1">
        <span>3</span> <a href="../capitulo_3.html"> Mejora tu productividad</a>
    </li>
    <li class="level-1">
        <span>4</span> <a href="../capitulo_4.html"> Emails</a>
    </li>
    <li class="level-1">
        <span>5</span> <a href="../capitulo_5.html"> Widgets y validadores propios</a>
    </li>
    <li class="level-1">
        <span>6</span> <a href="../capitulo_6.html"> Formularios avanzados</a>
    </li>
    <li class="level-1">
        <span>7</span> <a href="../capitulo_7.html"> Mejorando la barra de depuración web</a>
    </li>
    <li class="level-1">
        <span>8</span> <a href="../capitulo_8.html"> Uso avanzado de Doctrine</a>
    </li>
    <li class="level-1">
        <span>9</span> <a href="../capitulo_9.html"> Utilizando la herencia de tablas de Doctrine</a>
    </li>
    <li class="level-1">
        <span>10</span> <a href="../capitulo_10.html"> Funcionamiento interno de Symfony</a>
    </li>
    <li class="level-1 ">
        <a href="../capitulo_11.html">
            <span>Capítulo 11.</span> Windows y Symfony
        </a>
    </li>
    <li class="level-2 ">
        <a href="introduccion.html">
            <span>11.1.</span> Introducción
        </a>
    </li>
    <li class="level-2 ">
        <a href="comprobaciones_iniciales_servidor_dedicado_en_internet.html">
            <span>11.2.</span> Comprobaciones iniciales - Servidor dedicado en Internet
        </a>
    </li>
    <li class="level-2 ">
        <a href="instalando_php_en_unos_pocos_clicks.html">
            <span>11.3.</span> Instalando PHP en unos pocos clicks
        </a>
    </li>
    <li class="level-2 ">
        <a href="ejecutando_php_desde_la_linea_de_comandos.html">
            <span>11.4.</span> Ejecutando PHP desde la línea de comandos
        </a>
    </li>
    <li class="level-2 ">
        <a href="instalacion_y_uso_del_sandbox_de_symfony.html">
            <span>11.5.</span> Instalación y uso del sandbox de Symfony
        </a>
    </li>
    <li class="level-2 active">
        <a href="creando_un_nuevo_proyecto_symfony.html">
            <span>11.6.</span> Creando un nuevo proyecto Symfony
        </a>
    </li>
    <li class="level-1">
        <span>12</span> <a href="../capitulo_12.html"> Desarrollando aplicaciones Facebook</a>
    </li>
    <li class="level-1">
        <span>13</span> <a href="../capitulo_13.html"> Descubriendo el poder de la línea de comandos</a>
    </li>
    <li class="level-1">
        <span>14</span> <a href="../capitulo_14.html"> Jugando con la cache de configuración de Symfony</a>
    </li>
    <li class="level-1">
        <span>15</span> <a href="../capitulo_15.html"> Trabajando con la comunidad Symfony</a>
    </li>
    <li class="level-1">
        <span>A</span> <a href="../apendice_a.html"> Código JavaScript de sfWidgetFormGMapAddress</a>
    </li>
    <li class="level-1">
        <span>B</span> <a href="../apendice_b.html"> Ejemplo de instalador propio</a>
    </li>
    <li class="level-1">
        <span>C</span> <a href="../apendice_c.html"> Licencia</a>
    </li>
</ul>
</div>
        </div></div>
        <div id="footer" class="row">
            <span class="span6">&copy; 2013 LibrosWeb.es 
            <a href="../../contacto/index.html">Contacto</a></span>
            <span class="span6 version">2.340 días online</span>
        </div>
    </div>
    </body>
</html>

<!-- Localized -->